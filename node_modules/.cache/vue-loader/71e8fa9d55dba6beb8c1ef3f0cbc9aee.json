{"remainingRequest":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/raqu/repos/LuckyTruck_UI_Solulab/src/components/PoliciesReview.vue?vue&type=style&index=0&id=f1bafa10&lang=scss&scoped=true&","dependencies":[{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/src/components/PoliciesReview.vue","mtime":1571770663143},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// div {\n//   outline: 1px solid red;\n// }\n.white-space {\n  white-space: nowrap;\n}\n.policies-review {\n  .policy-image-wrapper {\n    height: 100px;\n    width: 100px;\n    min-width: 100px;\n    max-width: 100px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .policy-image {\n      border-radius: 15px;\n    }\n  }\n\n  .policy-info {\n    .policy-title {\n      font-size: 1.3rem;\n    }\n\n    .policy-subtitle {\n      font-size: 0.8rem;\n    }\n    .clr {\n      color: #007bff;\n      cursor: pointer;\n    }\n  }\n}\n",{"version":3,"sources":["PoliciesReview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PoliciesReview.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"policies-review container-fluid\">\n    <div class=\"card mb-5\">\n      <div class=\"card-body\">\n        <h4 class=\"card-title form-sub-title\">Review Policies</h4>\n\n        <div v-if=\"loading\">Loading...</div>\n        <div v-if=\"status\">\n          <div v-for=\"item in quotes\" :key=\"item.id\" class=\"mb-2 d-flex\">\n            <div class=\"policy-image-wrapper px-1\">\n              <img :src=\"item.img\" alt class=\"policy-image\">\n            </div>\n\n            <div class=\"policy-info px-3 pt-2\">\n              <div class=\"policy-title\">{{ item.title }}</div>\n\n              <!-- <div class=\"policy-subtitle\">{{ item.policyType }}</div> -->\n\n              <div class=\"policy-subtitle\">\n                Effective Date:\n                <strong>{{ item.effectiveDate }}</strong>\n              </div>\n              <div class=\"policy-subtitle\">\n                Policy:\n                <!-- <strong>{{ item.document }}</strong> -->\n                <a @click=\"openInNewWindow\">\n                  <strong class=\"clr\">{{ item.document }}</strong>\n                </a>\n              </div>\n\n              <div class=\"policy-subtitle\">\n                Mo/Yr Premium:\n                <strong>$ {{ item.premium }}</strong>\n              </div>\n\n              <!-- <button\n                type=\"button\"\n                class=\"btn btn-sm btn-primary\"\n                @click=\"requestCertificate\"\n              >Request a Certificate</button>-->\n\n              <!-- <button\n                type=\"button\"\n                class=\"btn btn-sm btn-primary\"\n                @click=\"requestAutoCertificate\"\n              >Request Automated Certificate</button>\n              </div>-->\n\n              <!-- <div class=\"d-flex small\">\n              <div class=\"px-2\">\n                <a href=\"#\" @click.prevent>View Details</a>\n              </div>\n\n              <div class=\"px-2\">\n                <a href=\"#\" @click.prevent>View Change History</a>\n              </div>\n              </div>-->\n            </div>\n          </div>\n\n          <div class=\"mt-3\">\n            <router-link\n              :to=\"{ name: '' }\"\n              class=\"lt-button pad-10 mr-2 lt-button-main viewquote mb-1 white-space d-block text-center\"\n              active-class=\"font-weight-bold\"\n              @click.native=\"requestCertificate\"\n            >Request Manual Certificate</router-link>\n            <span class=\"d-block text-center\">OR</span>\n\n            <router-link\n              :to=\"{ name: '' }\"\n              class=\"lt-button pad-10 lt-button-main viewquote mb-1 white-space d-block text-center\"\n              active-class=\"font-weight-bold\"\n              @click.native=\"requestAutoCertificate\"\n            >Generate Automated Certificate</router-link>\n          </div>\n          <div v-if=\"error\" class=\"alert alert-danger\" role=\"alert\">{{ error }}</div>\n        </div>\n        <div v-else>\n          <span>\n            Your application is complete, we should have an update for you soon. If you have any further questions about this, feel to call us at\n            <a href=\"tel:16469330419\" style=\"font-weight:bold; white-space:nowrap;\">1-646-933-0419</a>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport { setTimeout } from \"timers\";\n\nexport default {\n  name: \"PoliciesReview\",\n  filters: {\n    // date(date) {\n    //   return moment(date).format(\"MMM, DD, YYYY\");\n    // },\n    // premium(num) {\n    //   // 12345.67 -> 12,345.67\n    //   return num.toFixed(2).replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\");\n    // }\n  },\n\n  data() {\n    return {\n      quotes: [\n        {\n          id: 1,\n          title: \"ForAgentsOnly\",\n          policyType: \"Policy Type\",\n          img: \"https://picsum.photos/200\",\n          effectiveDate: \"\",\n          premium: \"\",\n          document: \"\",\n          document_file: \"\"\n        }\n      ],\n      status: false,\n      loading: false,\n      error: null,\n      policyId: \"\"\n    };\n  },\n\n  methods: {\n    openInNewWindow() {\n      window.open(this.quotes[0].document_file);\n    },\n    requestCertificate() {\n      axios\n        .post(\n          \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/requestforcertificate?policy_id=\" +\n            this.policyId +\n            \"&certificate_status=1\"\n        )\n        .then(res => {\n          if (res.status == 200) {\n            //  this.$swal(\"Thank You!\", \"You will get our agent call in next 24 hours!\", \"success\").then(()=>this.$route.push({name:\"AccountInfo\"}))\n            localStorage.setItem(\"policyId\", this.policyId);\n\n            swal({\n              title: \"Thank You!\",\n              text: \"Your request has been accepted\",\n              icon: \"success\",\n              buttons: [\"No\", \"Yes\"]\n            }).then(willDelete => {\n              console.log(\"willbe\", willDelete);\n              if (willDelete) {\n                this.$router.push({ name: \"Certificates\" });\n              } else {\n                // swal(\n                //   \"Thank You!\",\n                //   \"Your changes has been accepted! You will get new Updated Quote\",\n                //   {\n                //     icon: \"success\"\n                //   }\n                // );\n              }\n            });\n          } else if (res.status != 200)\n            this.$swal(\"Opps!\", res.data.msg, \"error\");\n        })\n        .catch(err => this.$swal(\"Opps!\", err, \"error\"))\n        .finally(() => console.log(\"hiiiiiiii\"));\n    },\n    requestAutoCertificate() {\n      axios\n        .post(\n          \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/requestforcertificate?policy_id=\" +\n            this.policyId +\n            \"&certificate_status=2\"\n        )\n        .then(res => {\n          if (res.status == 200) {\n            //  this.$swal(\"Thank You!\", \"You will get our agent call in next 24 hours!\", \"success\").then(()=>this.$route.push({name:\"AccountInfo\"}))\n            localStorage.setItem(\"policyId\", this.policyId);\n            setTimeout(() => {\n              axios\n                .get(\n                  \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/getpolicycertificate?policy_id=\" +\n                    this.policyId\n                )\n                .then(res => {\n                  // console.log(\"res\", res.data);\n                  console.log(\"res.data.document_file\", res.data.document_file);\n                  window.open(res.data.certificate_file);\n                });\n            }, 700);\n\n            // swal({\n            //   title: \"Thank You!\",\n            //   text: \"Your request has been accepted\",\n            //   icon: \"success\",\n            //   buttons: [\"No\", \"Yes\"]\n            // }).then(willDelete => {\n            //   console.log(\"willbe\", willDelete);\n            //   if (willDelete) {\n            //     this.$router.push({ name: \"Certificates\" });\n            //   } else {\n            //   }\n            // });\n          } else if (res.status != 200) {\n            // this.$swal(\"Opps!\", res.data.msg, \"error\");\n          }\n        })\n        .catch(err => this.$swal(\"Opps!\", err, \"error\"))\n        .finally(() => console.log(\"hiiiiiiii\"));\n    }\n  },\n  mounted() {\n    // console.log(\"localStorage.getItem(quotation_id)\",localStorage.getItem(\"quotation_id\"));\n\n    // setTimeout(() => {\n      axios\n        .get(\n          \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/getcountofcompanybyuserid?user_id=\" +\n            localStorage.getItem(\"userId\")\n        )\n        .then(res => {\n          console.log(\"res\", res.data.count);\n          // this.count = res.data.count;\n          if (res.data.count >= 10) {\n            this.status = true;\n          } else {\n            this.status = false;\n          }\n        });\n    // }, 500);\n\n\n  // if(this.status){\n    axios\n      .get(\n        \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/getpolicydocument?quotation_id=\" +\n          localStorage.getItem(\"quotation_id\")\n      )\n      .then(res => {\n        console.log(\"res\", res.data);\n        this.quotes[0].effectiveDate = res.data.effective_date;\n        this.quotes[0].premium = res.data.premium;\n        this.quotes[0].document = res.data.document_file.split(\"/\")[6];\n        this.quotes[0].document_file = res.data.document_file;\n        this.policyId = res.data.id;\n      });\n  // }\n    \n  },\n  created() {\n    this.$emit(\"update-hint\", \" \");\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n// div {\n//   outline: 1px solid red;\n// }\n.white-space {\n  white-space: nowrap;\n}\n.policies-review {\n  .policy-image-wrapper {\n    height: 100px;\n    width: 100px;\n    min-width: 100px;\n    max-width: 100px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .policy-image {\n      border-radius: 15px;\n    }\n  }\n\n  .policy-info {\n    .policy-title {\n      font-size: 1.3rem;\n    }\n\n    .policy-subtitle {\n      font-size: 0.8rem;\n    }\n    .clr {\n      color: #007bff;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n\n"]}]}