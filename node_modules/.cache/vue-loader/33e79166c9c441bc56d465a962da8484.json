{"remainingRequest":"/Users/admin/Desktop/luckytruck/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/admin/Desktop/luckytruck/src/views/LogIn.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/admin/Desktop/luckytruck/src/views/LogIn.vue","mtime":1563074486866},{"path":"/Users/admin/Desktop/luckytruck/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/luckytruck/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/luckytruck/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/admin/Desktop/luckytruck/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/admin/Desktop/luckytruck/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { API } from \"../api.js\";\nexport default {\n  name: \"LogInView\",\n  data() {\n    return {\n      formData: {\n        // username: '',\n        email: \"\",\n        password: \"\"\n      },\n\n      loading: false,\n      error: \"\",\n      formErrors: {}\n    };\n  },\n\n  methods: {\n    async login() {\n      this.loading = true;\n      this.error = null;\n      try {\n        let data = await API.post(\"users/login\", {\n          email: this.formData.email,\n          password: this.formData.password\n        });\n        console.log(\"data\", data);\n\n        if (data.status === \"ok\") {\n          // console.log(\"data\", data.data.Tokens[0].token);\n          let t = data.data;\n          console.log(\"data\", data.data.id);\n          localStorage.setItem(\"userId\",data.data.id)\n          localStorage.setItem(\"token\", t);\n          localStorage.setItem(\"viewQuote\", false);\n          localStorage.setItem(\"accBtn\",true)\n          this.$router.push({ name: \"AccountInfo\" });\n        } else if (data.status === \"error\") {\n          this.error = data.messages || data.data;\n        }\n      } catch (err) {\n        console.error(\"catch\", err);\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    }}\n};\n",null]}