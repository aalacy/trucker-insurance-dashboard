{"remainingRequest":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/raqu/repos/LuckyTruck_UI_Solulab/src/components/AccountInfoDocumentUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/src/components/AccountInfoDocumentUpload.vue","mtime":1571770663139},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raqu/repos/LuckyTruck_UI_Solulab/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { API } from \"../api.js\";\nimport ModalLogin from \"./ModalLogin.vue\";\nimport axios from \"axios\";\nimport { setTimeout } from \"timers\";\nexport default {\n  components: {\n    modelLogin: ModalLogin,\n  },\n  name: \"AccountInfoDocumentUpload\",\n  props: {\n    prevForm: {\n      type: String,\n      required: true\n    },\n    nextForm: {\n      type: String,\n      required: true\n    },\n    progress: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      uuid: \"\",\n      userData: \"\",\n      final_uuid: \"\",\n      showmodel: false,\n      save: true,\n      formData: {\n        lossRun: null,\n        ifta: null,\n        contracts: null,\n        declarations: null,\n        rentalLeaseAgreement: null,\n        previouslyCompletedApplications: null,\n        insuranceRequirements: null\n      },\n      preview: {\n        lossRun: null,\n        ifta: null,\n        contracts: null,\n        declarations: null,\n        rentalLeaseAgreement: null,\n        previouslyCompletedApplications: null,\n        insuranceRequirements: null\n      },\n      formErrors: {},\n      loading: false,\n      error: null\n    };\n  },\n  created() {\n    this.$emit(\"update-progress\", this.progress);\n    this.loadCompany();\n  },\n  updated() {\n    if (localStorage.getItem(\"showModal\") == \"true\") {\n      this.showmodel = true;\n    } else {\n      this.showmodel = false;\n    }\n  },\n  mounted() {\n    if (localStorage.getItem(\"token\")) {\n      this.save = false;\n      axios\n        .get(\n          \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/getuuidbyuserid?user_id=\" +\n            localStorage.getItem(\"userId\")\n        )\n        .then(coins => {\n          this.userData = coins.data.uuid;\n        });\n      setTimeout(() => {\n        this.$store.dispatch(\"loadData\", this.userData).then(() => {\n          let len = this.$store.state.getData.data;\n          for (let i = 0; i < len.length; i++) {\n            if (this.$store.state.getData.data[i].key === \"lossRun\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.lossRun = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"ifta\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.ifta = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"contracts\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.contracts = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"declarations\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.declarations = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"rentalLeaseAgreement\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.rentalLeaseAgreement = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key ===\n              \"previouslyCompletedApplications\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.previouslyCompletedApplications = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"insuranceRequirements\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.insuranceRequirements = a;\n              \n            }\n          }\n        });\n      }, 1000);\n    } else {\n      this.save = true;\n      setTimeout(() => {\n        this.$store.dispatch(\"loadData\", this.uuid).then(() => {\n          let len = this.$store.state.getData.data;\n          for (let i = 0; i < len.length; i++) {\n            if (this.$store.state.getData.data[i].key === \"lossRun\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.lossRun = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"ifta\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.ifta = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"contracts\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.contracts = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"declarations\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.declarations = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"rentalLeaseAgreement\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.rentalLeaseAgreement = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key ===\n              \"previouslyCompletedApplications\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.previouslyCompletedApplications = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"insuranceRequirements\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.insuranceRequirements = a;\n              \n            }\n          }\n        });\n      }, 1000);\n    }\n    \n  },\n  methods: {\n    newQuoteReq() {\n      swal({\n        title: \"Are you sure?\",\n        text: \"Do you want to continue editing?\",\n        icon: \"warning\",\n        buttons: [\"No\", \"Yes\"]\n      }).then(willDelete => {\n        \n        this.show();\n        if (willDelete) {\n          this.$router.push({ name: \"AccountInfoDocumentUpload\" });\n        } else {\n          swal(\n            \"Thank You!\",\n            \"Your changes has been accepted! You will get new Updated Quote\",\n            {\n              icon: \"success\"\n            }\n          );\n        }\n      });\n    },\n    removeDoc(fieldName) {\n      \n      switch (fieldName) {\n        case \"lossRun\":\n          \n          this.formData.lossRun = null;\n          \n          this.preview.lossRun = null;\n          break;\n        case \"ifta\":\n          this.formData.ifta = null;\n          this.preview.ifta = null;\n          break;\n        case \"contracts\":\n          this.formData.contracts = null;\n          this.preview.contracts = null;\n          break;\n        case \"declarations\":\n          this.formData.declarations = null;\n          this.preview.declarations = null;\n          break;\n        case \"rentalLeaseAgreement\":\n          this.formData.rentalLeaseAgreement = null;\n          this.preview.rentalLeaseAgreement = null;\n          break;\n        case \"previouslyCompletedApplications\":\n          this.formData.previouslyCompletedApplications = null;\n          this.preview.previouslyCompletedApplications = null;\n          break;\n        case \"insuranceRequirements\":\n          this.formData.insuranceRequirements = null;\n          this.preview.insuranceRequirements = null;\n          break;\n      }\n    },\n    async show() {\n      this.loading = true;\n      this.error = null;\n      var temp_uuid;\n      if (localStorage.getItem(\"token\")) {\n        temp_uuid = this.userData;\n        \n      } else {\n        temp_uuid = this.uuid;\n        \n      }\n      try {\n        let data = await API.formData(\"company/upload\", temp_uuid);\n        if (data.status === \"OK\") {\n          if (!localStorage.getItem(\"token\")) {\n            if (this.showmodel) {\n              this.showmodel = false;\n            } else {\n              this.showmodel = true;\n            }\n          }\n        } else if (data.status === \"ERROR\") {\n          this.error = data.messages[0] || data.data;\n        }\n        axios\n          .post(\n            \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/postUserIdByUuid?uuid=\" +\n              this.uuid +\n              \"&user_id=\" +\n              localStorage.getItem(\"userId\")\n          )\n          .then(res => {\n            \n          });\n      } catch (err) {\n        // this.showmodel = true;\n\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        // this.showmodel = true;\n        this.loading = false;\n      }\n    },\n    goPrevForm() {\n      this.$emit(\"go-to-form\", this.prevForm);\n    },\n    goNextForm() {\n      this.$emit(\"go-to-form\", this.nextForm);\n    },\n    onFileChange(event, fieldName) {\n      let file = event.target.files[0] || null;\n      this.formData[fieldName] = file;\n      \n      this.previewFile(file, fieldName);\n    },\n    previewFile(file, fieldName) {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        // this.preview[fieldName] = reader.result;\n        \n      };\n\n      if (file) {\n        reader.readAsDataURL(file);\n        this.preview[fieldName] = file.name;\n        // \n      } else {\n        // \n        this.preview[fieldName] = null;\n      }\n    },\n    async loadCompany() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        let data = await API.get(\"company/current\");\n        this.uuid = data.data.b;\n        \n        if (data.status === \"ERROR\") {\n          // this.$router.replace({ name: \"Home\" });\n        }\n      } catch (err) {\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    },\n    async updateCompany() {\n      this.loading = true;\n      this.error = null;\n      \n      try {\n        let data = await API.formData(\"company/upload\", this.formData);\n      \n        \n         if(localStorage.getItem('token')){\n        \n          this.final_uuid = this.userData;\n          \n      }else{\n        this.final_uuid = this.uuid;\n        \n      }\n        if (data.status === \"OK\") {\n          \n          this.goNextForm();\n        } else if (data.status === \"ERROR\") {\n          this.error = data.messages[0] || data.data;\n        }\n        axios\n          .post(\n            \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/postUserIdByUuid?uuid=\" +\n             this.final_uuid  +\n              \"&user_id=\" +\n              localStorage.getItem(\"userId\")\n          )\n          .then(res => {\n            \n          });\n      } catch (err) {\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n",{"version":3,"sources":["AccountInfoDocumentUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AccountInfoDocumentUpload.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"account-info-document-upload-form container-fluid mob-2\">\n    <form @submit.prevent=\"updateCompany\">\n      <div class=\"card mb-5\">\n        <div class=\"card-body\">\n          <h4 class=\"card-title form-sub-title\">Document Upload</h4>\n          <div class=\"m-1 pb-2\">\n            <span>Although these uploads are not mandatory, they help to provide you more options and a faster service, if completed, as many carriers require such data. Please upload all of the relevant documents that you can</span>\n          </div>\n          <div class=\"row set-mob\">\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"lossRun\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"lossRun\" class=\"label\">Loss Run</label>\n                <input\n                  id=\"lossRun\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.lossRun }\"\n                  @change=\"onFileChange($event, 'lossRun')\"\n                >\n              </div>\n              <div v-if=\"preview.lossRun\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.lossRun}}</p>\n                <button type=\"button\" class=\"btn btn-close1\" @click=\"removeDoc('lossRun')\">\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"ifta\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"ifta\" class=\"label\">IFTA</label>\n\n                <input\n                  id=\"ifta\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.ifta }\"\n                  @change=\"onFileChange($event, 'ifta')\"\n                >\n              </div>\n              <div v-if=\"preview.ifta\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.ifta}}</p>\n                <button type=\"button\" class=\"btn btn-close1\" @click=\"removeDoc('ifta')\">\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"contracts\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"contracts\" class=\"label\">Contracts & Sample COI's</label>\n\n                <input\n                  id=\"contracts\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.contracts }\"\n                  @change=\"onFileChange($event, 'contracts')\"\n                >\n              </div>\n              <div v-if=\"preview.contracts\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.contracts}}</p>\n                <button type=\"button\" class=\"btn btn-close1\" @click=\"removeDoc('contracts')\">\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"declarations\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"declarations\" class=\"label\">Declarations</label>\n\n                <input\n                  id=\"declarations\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.declarations }\"\n                  @change=\"onFileChange($event, 'declarations')\"\n                >\n              </div>\n              <div v-if=\"preview.declarations\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.declarations}}</p>\n                <button type=\"button\" class=\"btn btn-close1\" @click=\"removeDoc('declarations')\">\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"rentalLeaseAgreement\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"rentalLeaseAgreement\" class=\"label\">Rental/Lease Agreements</label>\n\n                <input\n                  id=\"rentalLeaseAgreement\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.rentalLeaseAgreement }\"\n                  @change=\"onFileChange($event, 'rentalLeaseAgreement')\"\n                >\n              </div>\n              <div v-if=\"preview.rentalLeaseAgreement\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.rentalLeaseAgreement}}</p>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-close1\"\n                  @click=\"removeDoc('rentalLeaseAgreement')\"\n                >\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"previouslyCompletedApplications\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label\n                  for=\"previouslyCompletedApplications\"\n                  class=\"label\"\n                >Previously Completed Applications</label>\n\n                <input\n                  id=\"previouslyCompletedApplications\"\n                  type=\"file\"\n                  :class=\"{\n                'has-error': formErrors.previouslyCompletedApplications\n              }\"\n                  @change=\"onFileChange($event, 'previouslyCompletedApplications')\"\n                >\n              </div>\n              <div\n                v-if=\"preview.previouslyCompletedApplications\"\n                class=\"d-flex justify-content-start align-base\"\n              >\n                <p class=\"preview-image\">{{preview.previouslyCompletedApplications}}</p>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-close1\"\n                  @click=\"removeDoc('previouslyCompletedApplications')\"\n                >\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n\n            <div class=\"form-group\">\n              <div class=\"image-upload\">\n                <label for=\"insuranceRequirements\">\n                  <img src=\"../assets/images/upload.png\">\n                </label>\n                <label for=\"insuranceRequirements\" class=\"label\">Insurance Requirements</label>\n\n                <input\n                  id=\"insuranceRequirements\"\n                  type=\"file\"\n                  :class=\"{ 'has-error': formErrors.insuranceRequirements }\"\n                  @change=\"onFileChange($event, 'insuranceRequirements')\"\n                >\n              </div>\n              <div v-if=\"preview.insuranceRequirements\" class=\"d-flex justify-content-start align-base\">\n                <p class=\"preview-image\">{{preview.insuranceRequirements}}</p>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-close1\"\n                  @click=\"removeDoc('insuranceRequirements')\"\n                >\n                  <font-awesome-icon icon=\"times\" />\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div v-if=\"error\" class=\"alert alert-danger\" role=\"alert\">{{ error }}</div>\n        </div>\n\n        <div class=\"card-footer\">\n          <div class=\"form-buttons next-wrapper\">\n            <div class=\"col-6 p-0\">\n              <button\n                :disabled=\"loading\"\n                type=\"button\"\n                class=\"lt-button lt-button-default btn-block btn-border-radius-lb\"\n                @click=\"goPrevForm\"\n              >\n                Prev\n                <div class=\"next-title text-center d-inline pl-3  mob-2\">Additional Comments</div>\n              </button>\n            </div>\n\n            <div class=\"col-6 p-0\">\n              <button\n                :disabled=\"loading\"\n                type=\"submit\"\n                class=\"lt-button lt-button-main btn-block btn-border-radius-rb\"\n                \n              >\n                {{ loading ? 'Loading...' : 'Next' }}\n                <div class=\"next-title text-center d-inline pl-3 mob-2 text-white\">Sign & Complete</div>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"d-flex justify-content-center m-4\" @click=\"show\" v-if=\"save\">\n        <span class=\"save-hover\">Save & Continue</span>\n      </div>\n      <div class=\"d-flex justify-content-center m-4\" @click=\"newQuoteReq\" v-else>\n        <span class=\"save-hover\">Save Changes</span>\n      </div>\n      <div v-if=\"showmodel\">\n        <modelLogin/>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { API } from \"../api.js\";\nimport ModalLogin from \"./ModalLogin.vue\";\nimport axios from \"axios\";\nimport { setTimeout } from \"timers\";\nexport default {\n  components: {\n    modelLogin: ModalLogin,\n  },\n  name: \"AccountInfoDocumentUpload\",\n  props: {\n    prevForm: {\n      type: String,\n      required: true\n    },\n    nextForm: {\n      type: String,\n      required: true\n    },\n    progress: {\n      type: Number,\n      required: true\n    }\n  },\n  data() {\n    return {\n      uuid: \"\",\n      userData: \"\",\n      final_uuid: \"\",\n      showmodel: false,\n      save: true,\n      formData: {\n        lossRun: null,\n        ifta: null,\n        contracts: null,\n        declarations: null,\n        rentalLeaseAgreement: null,\n        previouslyCompletedApplications: null,\n        insuranceRequirements: null\n      },\n      preview: {\n        lossRun: null,\n        ifta: null,\n        contracts: null,\n        declarations: null,\n        rentalLeaseAgreement: null,\n        previouslyCompletedApplications: null,\n        insuranceRequirements: null\n      },\n      formErrors: {},\n      loading: false,\n      error: null\n    };\n  },\n  created() {\n    this.$emit(\"update-progress\", this.progress);\n    this.loadCompany();\n  },\n  updated() {\n    if (localStorage.getItem(\"showModal\") == \"true\") {\n      this.showmodel = true;\n    } else {\n      this.showmodel = false;\n    }\n  },\n  mounted() {\n    if (localStorage.getItem(\"token\")) {\n      this.save = false;\n      axios\n        .get(\n          \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/getuuidbyuserid?user_id=\" +\n            localStorage.getItem(\"userId\")\n        )\n        .then(coins => {\n          this.userData = coins.data.uuid;\n        });\n      setTimeout(() => {\n        this.$store.dispatch(\"loadData\", this.userData).then(() => {\n          let len = this.$store.state.getData.data;\n          for (let i = 0; i < len.length; i++) {\n            if (this.$store.state.getData.data[i].key === \"lossRun\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.lossRun = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"ifta\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.ifta = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"contracts\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.contracts = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"declarations\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.declarations = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"rentalLeaseAgreement\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.rentalLeaseAgreement = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key ===\n              \"previouslyCompletedApplications\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.previouslyCompletedApplications = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"insuranceRequirements\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.insuranceRequirements = a;\n              \n            }\n          }\n        });\n      }, 1000);\n    } else {\n      this.save = true;\n      setTimeout(() => {\n        this.$store.dispatch(\"loadData\", this.uuid).then(() => {\n          let len = this.$store.state.getData.data;\n          for (let i = 0; i < len.length; i++) {\n            if (this.$store.state.getData.data[i].key === \"lossRun\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.lossRun = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"ifta\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.ifta = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"contracts\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.contracts = a;\n              \n            }\n            if (this.$store.state.getData.data[i].key === \"declarations\") {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.declarations = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"rentalLeaseAgreement\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.rentalLeaseAgreement = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key ===\n              \"previouslyCompletedApplications\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.previouslyCompletedApplications = a;\n              \n            }\n            if (\n              this.$store.state.getData.data[i].key === \"insuranceRequirements\"\n            ) {\n              let a = JSON.parse(this.$store.state.getData.data[i].val)[0]\n                .originalname;\n              this.preview.insuranceRequirements = a;\n              \n            }\n          }\n        });\n      }, 1000);\n    }\n    \n  },\n  methods: {\n    newQuoteReq() {\n      swal({\n        title: \"Are you sure?\",\n        text: \"Do you want to continue editing?\",\n        icon: \"warning\",\n        buttons: [\"No\", \"Yes\"]\n      }).then(willDelete => {\n        \n        this.show();\n        if (willDelete) {\n          this.$router.push({ name: \"AccountInfoDocumentUpload\" });\n        } else {\n          swal(\n            \"Thank You!\",\n            \"Your changes has been accepted! You will get new Updated Quote\",\n            {\n              icon: \"success\"\n            }\n          );\n        }\n      });\n    },\n    removeDoc(fieldName) {\n      \n      switch (fieldName) {\n        case \"lossRun\":\n          \n          this.formData.lossRun = null;\n          \n          this.preview.lossRun = null;\n          break;\n        case \"ifta\":\n          this.formData.ifta = null;\n          this.preview.ifta = null;\n          break;\n        case \"contracts\":\n          this.formData.contracts = null;\n          this.preview.contracts = null;\n          break;\n        case \"declarations\":\n          this.formData.declarations = null;\n          this.preview.declarations = null;\n          break;\n        case \"rentalLeaseAgreement\":\n          this.formData.rentalLeaseAgreement = null;\n          this.preview.rentalLeaseAgreement = null;\n          break;\n        case \"previouslyCompletedApplications\":\n          this.formData.previouslyCompletedApplications = null;\n          this.preview.previouslyCompletedApplications = null;\n          break;\n        case \"insuranceRequirements\":\n          this.formData.insuranceRequirements = null;\n          this.preview.insuranceRequirements = null;\n          break;\n      }\n    },\n    async show() {\n      this.loading = true;\n      this.error = null;\n      var temp_uuid;\n      if (localStorage.getItem(\"token\")) {\n        temp_uuid = this.userData;\n        \n      } else {\n        temp_uuid = this.uuid;\n        \n      }\n      try {\n        let data = await API.formData(\"company/upload\", temp_uuid);\n        if (data.status === \"OK\") {\n          if (!localStorage.getItem(\"token\")) {\n            if (this.showmodel) {\n              this.showmodel = false;\n            } else {\n              this.showmodel = true;\n            }\n          }\n        } else if (data.status === \"ERROR\") {\n          this.error = data.messages[0] || data.data;\n        }\n        axios\n          .post(\n            \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/postUserIdByUuid?uuid=\" +\n              this.uuid +\n              \"&user_id=\" +\n              localStorage.getItem(\"userId\")\n          )\n          .then(res => {\n            \n          });\n      } catch (err) {\n        // this.showmodel = true;\n\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        // this.showmodel = true;\n        this.loading = false;\n      }\n    },\n    goPrevForm() {\n      this.$emit(\"go-to-form\", this.prevForm);\n    },\n    goNextForm() {\n      this.$emit(\"go-to-form\", this.nextForm);\n    },\n    onFileChange(event, fieldName) {\n      let file = event.target.files[0] || null;\n      this.formData[fieldName] = file;\n      \n      this.previewFile(file, fieldName);\n    },\n    previewFile(file, fieldName) {\n      let reader = new FileReader();\n      reader.onloadend = () => {\n        // this.preview[fieldName] = reader.result;\n        \n      };\n\n      if (file) {\n        reader.readAsDataURL(file);\n        this.preview[fieldName] = file.name;\n        // \n      } else {\n        // \n        this.preview[fieldName] = null;\n      }\n    },\n    async loadCompany() {\n      this.loading = true;\n      this.error = null;\n\n      try {\n        let data = await API.get(\"company/current\");\n        this.uuid = data.data.b;\n        \n        if (data.status === \"ERROR\") {\n          // this.$router.replace({ name: \"Home\" });\n        }\n      } catch (err) {\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    },\n    async updateCompany() {\n      this.loading = true;\n      this.error = null;\n      \n      try {\n        let data = await API.formData(\"company/upload\", this.formData);\n      \n        \n         if(localStorage.getItem('token')){\n        \n          this.final_uuid = this.userData;\n          \n      }else{\n        this.final_uuid = this.uuid;\n        \n      }\n        if (data.status === \"OK\") {\n          \n          this.goNextForm();\n        } else if (data.status === \"ERROR\") {\n          this.error = data.messages[0] || data.data;\n        }\n        axios\n          .post(\n            \"http://3.13.68.92/luckytrucker_admin/api/CompanyController/postUserIdByUuid?uuid=\" +\n             this.final_uuid  +\n              \"&user_id=\" +\n              localStorage.getItem(\"userId\")\n          )\n          .then(res => {\n            \n          });\n      } catch (err) {\n        console.error(err);\n        this.error = err.message;\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.btn-close1 {\n  margin-top: -6;\n}\n.set-mob .form-group {\n  flex: 0 0 20%;\n  max-width: 20%;\n  text-align: center;\n}\n.image-upload > input {\n  display: none;\n}\n.image-upload img {\n  width: 60px;\n  background-color: #c5c1c1;\n  padding: 10px;\n  border-radius: 6px;\n}\n.account-info-document-upload-form {\n  .label {\n    display: block;\n  }\n  @media screen and (max-width: 639px) {\n    .set-mob .form-group {\n      flex: 0 0 33.333%;\n      max-width: 33.333%;\n    }\n  }\n\n  @media screen and (max-width: 479px) {\n    .set-mob .form-group {\n      flex: 0 0 50%;\n      max-width: 50%;\n    }\n  }\n}\n.preview-image {\n  color: #5e98f9;\n  font-size:13px;\n  align-items: baseline;\n  word-break: break-all;\n  margin: 0px;\n  padding: 0px;\n  padding-left: 20px; \n  padding-right:5px;\n}\n.align-base{\n  align-items: baseline;\n}\n\n.align-base button{\n  padding:0px;\n}\n</style>\n\n"]}]}