{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-7e1eab30\"],{\"1b13\":function(t,e,r){\"use strict\";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"modal-template \"}},[r(\"transition\",{attrs:{name:\"modal\"}},[t.showModal?r(\"div\",{staticClass:\"modal-mask \"},[r(\"div\",{staticClass:\"modal-wrapper col-12 col-sm-10 col-md-8 col-lg-5 \"},[r(\"div\",{staticClass:\"modal-container bor-rad\"},[r(\"form\",{staticClass:\"login-form\",on:{submit:function(t){t.preventDefault()}}},[r(\"div\",{staticClass:\"form-title row\"},[r(\"div\",{staticClass:\"title log-in-text \"},[t._v(\"Welcome back!\")]),r(\"div\",{staticClass:\"form-group\"},[r(\"button\",{staticClass:\"btn ico-btna\",attrs:{type:\"button\"},on:{click:t.dosomething}},[r(\"font-awesome-icon\",{staticClass:\"d-flex ml-5\",attrs:{icon:\"times\",size:\"2x\"}})],1)])]),r(\"div\",{staticClass:\"form-group\"},[r(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.email,expression:\"formData.email\"}],staticClass:\"lt-input lt-input-border\",attrs:{type:\"email\",placeholder:\"Email\"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,\"email\",e.target.value)}}})]),r(\"div\",{staticClass:\"form-group\"},[r(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.password,expression:\"formData.password\"}],staticClass:\"lt-input lt-input-border\",attrs:{type:\"password\",placeholder:\"Password\"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,\"password\",e.target.value)}}})]),r(\"div\",{staticClass:\"d-flex align-items-center\"},[r(\"div\",[r(\"a\",{staticClass:\"text-reset\",attrs:{href:\"#forgot-password\"},on:{click:function(t){t.preventDefault()}}},[t._v(\"Forgot your password?\")])]),r(\"div\",{staticClass:\"text-right flex-grow-1\"},[r(\"button\",{staticClass:\"lt-button lt-button-main go-button\",attrs:{type:\"submit\"},on:{click:t.login}},[t._v(\"LOGIN\")])])]),r(\"div\",{staticClass:\"row align-items-stretch sign-in-with\"},[r(\"div\",{staticClass:\"col mt-4 text-center\"},[r(\"div\",{staticClass:\"border-top  pt-2 pb-2\"},[t._v(\"Sign in With\")]),r(\"font-awesome-icon\",{staticClass:\"mr-4 color-fb\",attrs:{icon:{prefix:\"fab\",iconName:\"facebook-square\"},size:\"2x\"}}),r(\"font-awesome-icon\",{staticClass:\"color-g\",attrs:{icon:{prefix:\"fab\",iconName:\"google\"},size:\"2x\"}})],1)]),r(\"div\",[r(\"router-link\",{attrs:{to:{name:\"SignUp\"}}},[r(\"span\",[t._v(\"New user? Sign up\")])])],1)])])])]):t._e()]),r(\"div\",{attrs:{id:\"app\"}})],1)},o=[],s=r(\"1da1\"),n=r(\"d722\"),i={name:\"ModalLogin\",data(){return{showModal:!0,formData:{email:\"\",password:\"\",userID:\"\"}}},mounted(){localStorage.setItem(\"showModal\",!0)},methods:{login(){var t=this;return Object(s[\"a\"])(function*(){try{let r=yield n[\"a\"].post(\"users/login\",{email:t.formData.email,password:t.formData.password});if(console.log(\"data\",r.data.id),\"ok\"===r.status){console.log(\"data2\",r.status);let e=r.data;localStorage.setItem(\"token\",e),localStorage.setItem(\"userId\",r.data.id),localStorage.setItem(\"viewQuote\",!1),localStorage.setItem(\"showModal\",!1),t.$router.push({name:\"AccountInfoPersonalInfo\"})}else\"error\"===r.status&&(t.error=r.messages||r.data)}catch(e){console.error(\"catch\",e),t.error=e.message}finally{t.loading=!1}})()},dosomething(){this.showModal?(localStorage.setItem(\"showModal\",!1),this.showModal=!1):(console.log(\"modal else\",this.showModal),this.showModal=!0)}}},l=i,d=(r(\"e197\"),r(\"2877\")),c=Object(d[\"a\"])(l,a,o,!1,null,null,null);e[\"a\"]=c.exports},2366:function(t,e){for(var r=[],a=0;a<256;++a)r[a]=(a+256).toString(16).substr(1);function o(t,e){var a=e||0,o=r;return[o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],\"-\",o[t[a++]],o[t[a++]],\"-\",o[t[a++]],o[t[a++]],\"-\",o[t[a++]],o[t[a++]],\"-\",o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]],o[t[a++]]].join(\"\")}t.exports=o},4460:function(t,e,r){},c64e:function(t,e,r){var a=r(\"e1f4\"),o=r(\"2366\");function s(t,e,r){var s=e&&r||0;\"string\"==typeof t&&(e=\"binary\"===t?new Array(16):null,t=null),t=t||{};var n=t.random||(t.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e)for(var i=0;i<16;++i)e[s+i]=n[i];return e||o(n)}t.exports=s},cc2e:function(t,e,r){\"use strict\";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"drivers-form container-fluid mob-2\"},[r(\"form\",{on:{submit:function(e){return e.preventDefault(),t.updateCompany(e)}}},[r(\"div\",{staticClass:\"card mb-5\"},[r(\"div\",{staticClass:\"card-body\"},[r(\"h4\",{staticClass:\"card-title form-sub-title\"},[t._v(\"Owner(s)\")]),r(\"div\",{staticClass:\"d-flex\"},[r(\"div\",{staticClass:\"pr-3\"},[t._v(\"Are one of the drivers the owner?\")]),r(\"div\",{staticClass:\"flex-grow-1\"},[r(\"label\",[r(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.driverIsOwner,expression:\"formData.driverIsOwner\"}],attrs:{type:\"checkbox\"},domProps:{checked:Array.isArray(t.formData.driverIsOwner)?t._i(t.formData.driverIsOwner,null)>-1:t.formData.driverIsOwner},on:{change:function(e){var r=t.formData.driverIsOwner,a=e.target,o=!!a.checked;if(Array.isArray(r)){var s=null,n=t._i(r,s);a.checked?n<0&&t.$set(t.formData,\"driverIsOwner\",r.concat([s])):n>-1&&t.$set(t.formData,\"driverIsOwner\",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.formData,\"driverIsOwner\",o)}}}),t._v(\" Yes\\n            \")])])]),t.formData.driverIsOwner?r(\"div\",{staticClass:\"col-12 col-md-6\"},[r(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.driverOwnerIndex,expression:\"formData.driverOwnerIndex\"}],staticClass:\"lt-input\",on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e=\"_value\"in t?t._value:t.value;return e});t.$set(t.formData,\"driverOwnerIndex\",e.target.multiple?r:r[0])}}},[r(\"option\",{attrs:{value:\"\",disabled:\"\"}},[t._v(\"\\n              Select Driver\\n            \")]),t._l(t.drivers,function(e,a){return r(\"option\",{key:a,domProps:{value:a}},[t._v(\"\\n              \"+t._s(e.firstName)+\" \"+t._s(e.lastName)+\"\\n            \")])})],2)]):t._e(),r(\"hr\"),t._l(t.formData.owners,function(e,a){return r(\"account-info-owners-item\",{key:e._uuid,ref:\"ownerForm\",refInFor:!0,staticClass:\"mb-5\",attrs:{index:a,owner:e},on:{\"update-hint\":t.updateHint,\"remove-form\":t.removeForm}})}),r(\"hr\"),r(\"div\",{staticClass:\"row align-items-center mb-3\"},[r(\"div\",{staticClass:\"col font-weight-bold\"},[t._v(\"\\n            Add another owner\\n          \")]),r(\"div\",{staticClass:\"col-auto text-right\"},[r(\"button\",{staticClass:\"lt-button px-3\",attrs:{type:\"button\"},on:{click:t.addForm}},[t._v(\"\\n              +\\n            \")])])]),t.error?r(\"div\",{staticClass:\"alert alert-danger\",attrs:{role:\"alert\"}},[t._v(\"\\n          \"+t._s(t.error)+\"\\n        \")]):t._e()],2),r(\"div\",{staticClass:\"card-footer\"},[r(\"div\",{staticClass:\"form-buttons next-wrapper\"},[r(\"div\",{staticClass:\"col-6 p-0\"},[r(\"button\",{staticClass:\"lt-button lt-button-default px-4 btn-block btn-border-radius-lb mob-2\",attrs:{disabled:t.loading,type:\"button\"},on:{click:t.goPrevForm}},[t._v(\"\\n              Prev\\n              \"),r(\"div\",{staticClass:\"next-title text-center d-inline pl-3 mob-2\"},[t._v(\"\\n                Drivers\\n              \")])])]),r(\"div\",{staticClass:\"col-6 p-0\"},[r(\"button\",{staticClass:\"lt-button lt-button-main px-4 btn-block btn-border-radius-rb mob-2\",attrs:{disabled:t.loading,type:\"submit\"}},[t._v(\"\\n              \"+t._s(t.loading?\"Loading...\":\"Next\")+\"\\n              \"),r(\"div\",{staticClass:\"next-title text-center d-inline pl-3 text-white mob-2\"},[t._v(\"\\n                Underwriting Questions\\n              \")])])])])])]),r(\"div\",{staticClass:\"d-flex justify-content-center m-4\",on:{click:t.show}},[r(\"span\",{staticClass:\"save-hover\"},[t._v(\"Save & Continue \")])]),t.showmodel?r(\"div\",[r(\"modelLogin\")],1):t._e()])])},o=[],s=r(\"be94\"),n=r(\"1da1\"),i=r(\"c64e\"),l=r.n(i),d=r(\"d722\"),c=r(\"1b13\"),m={name:\"AccountInfoOwners\",components:{AccountInfoOwnersItem:()=>Promise.all([r.e(\"chunk-19ded745\"),r.e(\"chunk-2d0aab2d\")]).then(r.bind(null,\"11b9\")),modelLogin:c[\"a\"]},props:{prevForm:{type:String,required:!0},nextForm:{type:String,required:!0},progress:{type:Number,required:!0}},data(){return{showmodel:!1,formData:{driverIsOwner:!1,driverOwnerIndex:-1,owners:[]},drivers:[],loading:!1,error:null}},computed:{noOwners(){return-1===this.formData.driverOwnerIndex&&!this.formData.owners.length}},watch:{\"formData.driverIsOwner\"(t){t||(this.formData.driverOwnerIndex=-1)},noOwners(t){this.error=t?\"Please add at least one owner\":null}},created(){this.$emit(\"update-progress\",this.progress),this.loadCompany()},updated(){\"true\"==localStorage.getItem(\"showModal\")?this.showmodel=!0:this.showmodel=!1},methods:{show(){var t=this;return Object(n[\"a\"])(function*(){if(t.formData.driverIsOwner&&-1===t.formData.driverOwnerIndex&&(t.formData.driverIsOwner=!1),t.setDataFromForms(),t.noOwners)return;let e=!t.$refs.ownerForm||t.$refs.ownerForm.every(t=>t.validateForm());if(e){t.loading=!0,t.error=null;try{let e=yield d[\"a\"].post(\"company/save\",{key:\"owners\",val:Object(s[\"a\"])({},t.formData,{owners:t.formData.owners.map(t=>{let e=Object(s[\"a\"])({},t);return delete e._uuid,e})}),userId:localStorage.getItem(\"userId\"),uuid:localStorage.getItem(\"uuid\")});\"OK\"===e.status?t.showmodel?t.showmodel=!1:t.showmodel=!0:\"ERROR\"===e.status&&(t.showmodel=!0,t.error=e.messages[0]||e.data)}catch(r){console.error(r),t.error=r.message}finally{t.loading=!1}}})()},addForm(){console.log(\" _uuid: uuidv4()\",l()()),this.formData.owners.push({_uuid:l()()}),this.error=null},removeForm(t){this.formData.owners.splice(t,1)},updateHint(t){this.$emit(\"update-hint\",t)},goPrevForm(){this.$emit(\"go-to-form\",this.prevForm)},goNextForm(){this.$emit(\"go-to-form\",this.nextForm)},loadCompany(){var t=this;return Object(n[\"a\"])(function*(){t.loading=!0,t.error=null;try{let r=yield d[\"a\"].get(\"company/current\");if(\"OK\"===r.status){let e=r.data,a=e.drivers,o=e.owners;if(a&&(t.drivers=a),o){let e=o.owners;t.formData=Object(s[\"a\"])({},t.formData,o,{owners:e.map(t=>Object(s[\"a\"])({},t,{_uuid:l()()}))})}else t.addForm()}else r.status}catch(e){console.error(e),t.error=e.message}finally{t.loading=!1}})()},setDataFromForms(){let t=[];this.$refs.ownerForm&&this.$refs.ownerForm.forEach(e=>{let r=e.getFormData();t.push(r)}),this.formData.owners=t},updateCompany(){var t=this;return Object(n[\"a\"])(function*(){if(t.formData.driverIsOwner&&-1===t.formData.driverOwnerIndex&&(t.formData.driverIsOwner=!1),t.setDataFromForms(),t.noOwners)return;let e=!t.$refs.ownerForm||t.$refs.ownerForm.every(t=>t.validateForm());if(e){t.loading=!0,t.error=null;try{let e=yield d[\"a\"].post(\"company/save\",{key:\"owners\",val:Object(s[\"a\"])({},t.formData,{owners:t.formData.owners.map(t=>{let e=Object(s[\"a\"])({},t);return delete e._uuid,e})}),userId:localStorage.getItem(\"userId\"),uuid:localStorage.getItem(\"uuid\")});\"OK\"===e.status?t.goNextForm():\"ERROR\"===e.status&&(t.error=e.messages[0]||e.data)}catch(r){console.error(r),t.error=r.message}finally{t.loading=!1}}})()}}},u=m,f=r(\"2877\"),v=Object(f[\"a\"])(u,a,o,!1,null,\"7a12abb2\",null);e[\"default\"]=v.exports},e197:function(t,e,r){\"use strict\";var a=r(\"4460\"),o=r.n(a);o.a},e1f4:function(t,e){var r=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var a=new Uint8Array(16);t.exports=function(){return r(a),a}}else{var o=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}}}]);","extractedComments":[]}