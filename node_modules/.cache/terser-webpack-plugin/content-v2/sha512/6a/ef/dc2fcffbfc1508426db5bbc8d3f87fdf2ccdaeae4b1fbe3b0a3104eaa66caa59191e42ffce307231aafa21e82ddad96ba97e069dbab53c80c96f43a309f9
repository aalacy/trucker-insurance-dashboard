{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4cfdfe23\"],{\"1b13\":function(t,e,r){\"use strict\";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{attrs:{id:\"modal-template \"}},[r(\"transition\",{attrs:{name:\"modal\"}},[t.showModal?r(\"div\",{staticClass:\"modal-mask \"},[r(\"div\",{staticClass:\"modal-wrapper col-12 col-sm-10 col-md-8 col-lg-5 \"},[r(\"div\",{staticClass:\"modal-container bor-rad\"},[r(\"form\",{staticClass:\"login-form\",on:{submit:function(t){t.preventDefault()}}},[r(\"div\",{staticClass:\"form-title row\"},[r(\"div\",{staticClass:\"title log-in-text \"},[t._v(\"Welcome back!\")]),r(\"div\",{staticClass:\"form-group\"},[r(\"button\",{staticClass:\"btn ico-btna\",attrs:{type:\"button\"},on:{click:t.dosomething}},[r(\"font-awesome-icon\",{staticClass:\"d-flex ml-5\",attrs:{icon:\"times\",size:\"2x\"}})],1)])]),r(\"div\",{staticClass:\"form-group\"},[r(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.email,expression:\"formData.email\"}],staticClass:\"lt-input lt-input-border\",attrs:{type:\"email\",placeholder:\"Email\"},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,\"email\",e.target.value)}}})]),r(\"div\",{staticClass:\"form-group\"},[r(\"input\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.formData.password,expression:\"formData.password\"}],staticClass:\"lt-input lt-input-border\",attrs:{type:\"password\",placeholder:\"Password\"},domProps:{value:t.formData.password},on:{input:function(e){e.target.composing||t.$set(t.formData,\"password\",e.target.value)}}})]),r(\"div\",{staticClass:\"d-flex align-items-center\"},[r(\"div\",[r(\"a\",{staticClass:\"text-reset\",attrs:{href:\"#forgot-password\"},on:{click:function(t){t.preventDefault()}}},[t._v(\"Forgot your password?\")])]),r(\"div\",{staticClass:\"text-right flex-grow-1\"},[r(\"button\",{staticClass:\"lt-button lt-button-main go-button\",attrs:{type:\"submit\"},on:{click:t.login}},[t._v(\"LOGIN\")])])]),r(\"div\",{staticClass:\"row align-items-stretch sign-in-with\"},[r(\"div\",{staticClass:\"col mt-4 text-center\"},[r(\"div\",{staticClass:\"border-top  pt-2 pb-2\"},[t._v(\"Sign in With\")]),r(\"font-awesome-icon\",{staticClass:\"mr-4 color-fb\",attrs:{icon:{prefix:\"fab\",iconName:\"facebook-square\"},size:\"2x\"}}),r(\"font-awesome-icon\",{staticClass:\"color-g\",attrs:{icon:{prefix:\"fab\",iconName:\"google\"},size:\"2x\"}})],1)]),r(\"div\",[r(\"router-link\",{attrs:{to:{name:\"SignUp\"}}},[r(\"span\",[t._v(\"New user? Sign up\")])])],1)])])])]):t._e()]),r(\"div\",{attrs:{id:\"app\"}})],1)},a=[],s=r(\"1da1\"),i=r(\"d722\"),n={name:\"ModalLogin\",data(){return{showModal:!0,formData:{email:\"\",password:\"\",userID:\"\"}}},mounted(){localStorage.setItem(\"showModal\",!0)},methods:{login(){var t=this;return Object(s[\"a\"])(function*(){try{let r=yield i[\"a\"].post(\"users/login\",{email:t.formData.email,password:t.formData.password});if(console.log(\"data\",r.data.id),\"ok\"===r.status){console.log(\"data2\",r.status);let e=r.data;localStorage.setItem(\"token\",e),localStorage.setItem(\"userId\",r.data.id),localStorage.setItem(\"viewQuote\",!1),localStorage.setItem(\"showModal\",!1),t.$router.push({name:\"AccountInfoPersonalInfo\"})}else\"error\"===r.status&&(t.error=r.messages||r.data)}catch(e){console.error(\"catch\",e),t.error=e.message}finally{t.loading=!1}})()},dosomething(){this.showModal?(localStorage.setItem(\"showModal\",!1),this.showModal=!1):(console.log(\"modal else\",this.showModal),this.showModal=!0)}}},l=n,d=(r(\"e197\"),r(\"2877\")),c=Object(d[\"a\"])(l,o,a,!1,null,null,null);e[\"a\"]=c.exports},2366:function(t,e){for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);function a(t,e){var o=e||0,a=r;return[a[t[o++]],a[t[o++]],a[t[o++]],a[t[o++]],\"-\",a[t[o++]],a[t[o++]],\"-\",a[t[o++]],a[t[o++]],\"-\",a[t[o++]],a[t[o++]],\"-\",a[t[o++]],a[t[o++]],a[t[o++]],a[t[o++]],a[t[o++]],a[t[o++]]].join(\"\")}t.exports=a},4460:function(t,e,r){},\"7c0d\":function(t,e,r){\"use strict\";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r(\"div\",{staticClass:\"drivers-form container-fluid mob-2\"},[r(\"form\",{on:{submit:function(e){return e.preventDefault(),t.updateCompany(e)}}},[r(\"div\",{staticClass:\"card mb-5\"},[r(\"div\",{staticClass:\"card-body\"},[r(\"h4\",{staticClass:\"card-title form-sub-title\"},[t._v(\"Drivers\")]),t._l(t.drivers,function(e,o){return r(\"account-info-drivers-item\",{key:e._uuid,ref:\"driverForm\",refInFor:!0,staticClass:\"mb-5\",attrs:{index:o,driver:e},on:{\"update-hint\":t.updateHint,\"remove-form\":t.removeForm}})}),r(\"hr\"),r(\"div\",{staticClass:\"row align-items-center mb-3\"},[r(\"div\",{staticClass:\"col font-weight-bold\"},[t._v(\"Add another driver\")]),r(\"div\",{staticClass:\"col-auto text-right\"},[r(\"button\",{staticClass:\"lt-button px-3\",attrs:{type:\"button\"},on:{click:t.addForm}},[t._v(\"+\")])])]),t.error?r(\"div\",{staticClass:\"alert alert-danger\",attrs:{role:\"alert\"}},[t._v(t._s(t.error))]):t._e()],2),r(\"div\",{staticClass:\"card-footer\"},[r(\"div\",{staticClass:\"form-buttons next-wrapper\"},[r(\"div\",{staticClass:\"col-6 p-0\"},[r(\"button\",{staticClass:\"lt-button lt-button-default mob-2 px-4 btn-block btn-border-radius-lb\",attrs:{disabled:t.loading,type:\"button\"},on:{click:t.goPrevForm}},[t._v(\"\\n              Prev\\n              \"),r(\"div\",{staticClass:\"next-title text-center d-inline pl-3 mob-2\"},[t._v(\"ELD Provider\")])])]),r(\"div\",{staticClass:\"col-6 p-0\"},[r(\"button\",{staticClass:\"lt-button lt-button-main mob-2 px-4 btn-block btn-border-radius-rb\",attrs:{disabled:t.loading,type:\"submit\"}},[t._v(\"\\n              \"+t._s(t.loading?\"Loading...\":\"Next\")+\"\\n              \"),r(\"div\",{staticClass:\"next-title text-center d-inline pl-3 text-white mob-2\"},[t._v(\"Owners\")])])])])])]),r(\"div\",{staticClass:\"d-flex justify-content-center m-4\",on:{click:t.show}},[r(\"span\",{staticClass:\"save-hover\"},[t._v(\"Save & Continue\")])]),t.showmodel?r(\"div\",[r(\"modelLogin\")],1):t._e()])])},a=[],s=r(\"be94\"),i=r(\"1da1\"),n=r(\"c64e\"),l=r.n(n),d=r(\"d722\"),c=r(\"1b13\"),u={name:\"AccountInfoDrivers\",components:{AccountInfoDriversItem:()=>Promise.all([r.e(\"chunk-19ded745\"),r.e(\"chunk-2d20955e\")]).then(r.bind(null,\"a92b\")),modelLogin:c[\"a\"]},props:{prevForm:{type:String,required:!0},nextForm:{type:String,required:!0},progress:{type:Number,required:!0}},data(){return{showmodel:!1,drivers:[],loading:!1,error:null}},created(){this.$emit(\"update-progress\",this.progress),this.loadCompany()},updated(){\"true\"==localStorage.getItem(\"showModal\")?this.showmodel=!0:this.showmodel=!1},methods:{show(){var t=this;return Object(i[\"a\"])(function*(){t.setDataFromForms();let e=t.$refs.driverForm;if(!e.length)return;let r=e.every(t=>t.validateForm());if(r){t.loading=!0,t.error=null;try{let e=yield d[\"a\"].post(\"company/save\",{key:\"drivers\",val:t.drivers.map(t=>{let e=Object(s[\"a\"])({},t);return delete e._uuid,e}),userId:localStorage.getItem(\"userId\"),uuid:localStorage.getItem(\"uuid\")});\"OK\"===e.status?t.showmodel?t.showmodel=!1:t.showmodel=!0:\"ERROR\"===e.status&&(t.showmodel=!0,t.error=e.messages[0]||e.data)}catch(o){console.error(o),t.error=o.message}finally{t.loading=!1}}})()},addForm(){this.drivers.push({_uuid:l()()}),this.error=null},removeForm(t){this.drivers.splice(t,1),this.drivers.length||(this.error=\"Please add at least one driver\")},updateHint(t){this.$emit(\"update-hint\",t)},goPrevForm(){this.$emit(\"go-to-form\",this.prevForm)},goNextForm(){this.$emit(\"go-to-form\",this.nextForm)},loadCompany(){var t=this;return Object(i[\"a\"])(function*(){t.loading=!0,t.error=null;try{let r=yield d[\"a\"].get(\"company/current\");if(\"OK\"===r.status){let e=r.data.drivers;e&&e.length?t.drivers=e.map(t=>Object(s[\"a\"])({},t,{_uuid:l()()})):t.addForm()}else r.status}catch(e){console.error(e),t.error=e.message}finally{t.loading=!1}})()},setDataFromForms(){let t=[];this.$refs.driverForm.forEach(e=>{let r=e.getFormData();t.push(r)}),this.drivers=t},updateCompany(){var t=this;return Object(i[\"a\"])(function*(){t.setDataFromForms();let e=t.$refs.driverForm;if(!e.length)return;let r=e.every(t=>t.validateForm());if(r){t.loading=!0,t.error=null;try{let e=yield d[\"a\"].post(\"company/save\",{key:\"drivers\",val:t.drivers.map(t=>{let e=Object(s[\"a\"])({},t);return delete e._uuid,e}),userId:localStorage.getItem(\"userId\"),uuid:localStorage.getItem(\"uuid\")});\"OK\"===e.status?t.goNextForm():\"ERROR\"===e.status&&(t.error=e.messages[0]||e.data)}catch(o){console.error(o),t.error=o.message}finally{t.loading=!1}}})()}}},m=u,v=r(\"2877\"),p=Object(v[\"a\"])(m,o,a,!1,null,\"7f93c683\",null);e[\"default\"]=p.exports},c64e:function(t,e,r){var o=r(\"e1f4\"),a=r(\"2366\");function s(t,e,r){var s=e&&r||0;\"string\"==typeof t&&(e=\"binary\"===t?new Array(16):null,t=null),t=t||{};var i=t.random||(t.rng||o)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var n=0;n<16;++n)e[s+n]=i[n];return e||a(i)}t.exports=s},e197:function(t,e,r){\"use strict\";var o=r(\"4460\"),a=r.n(o);a.a},e1f4:function(t,e){var r=\"undefined\"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||\"undefined\"!=typeof msCrypto&&\"function\"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var o=new Uint8Array(16);t.exports=function(){return r(o),o}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}}}]);","extractedComments":[]}